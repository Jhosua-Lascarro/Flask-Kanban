name: "CI â€” ruff + ty"

on:
    push:
        branches: [main]
    pull_request:
        branches: [main]

jobs:
    lint_and_type:
        name: Lint & type check
        runs-on: ubuntu-latest

        steps:
            - name: Checkout
              uses: actions/checkout@v4

            - name: Set up Python
              uses: actions/setup-python@v4
              with:
                  python-version: "3.14"

            - name: Install dependencies and dev tools
              run: |
                  python -m pip install --upgrade pip
                  # install runtime dependencies from pyproject.toml so `ty` can resolve imports
                  pip install .
                  # install linters/type-checkers
                  pip install ruff ty

            - name: Run ruff (lint)
              run: ruff check .

            - name: Run ty (type check)
              run: ty check
